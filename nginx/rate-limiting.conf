# ===========================================
# Rate Limiting Configuration
# Add this to /etc/nginx/nginx.conf inside http {} block
# ===========================================

# Zone for general requests: 10 requests/second per IP
limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;

# Zone for API: 5 requests/second per IP (stricter)
limit_req_zone $binary_remote_addr zone=api:10m rate=5r/s;

# Connection limit zone
limit_conn_zone $binary_remote_addr zone=addr:10m;

# Log rate limited requests
limit_req_log_level warn;
limit_conn_log_level warn;

# Return 429 Too Many Requests (instead of 503)
limit_req_status 429;
limit_conn_status 429;
