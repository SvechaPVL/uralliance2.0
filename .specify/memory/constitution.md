<!--
═══════════════════════════════════════════════════════════════════════════
ОТЧЕТ О ВЛИЯНИИ СИНХРОНИЗАЦИИ
═══════════════════════════════════════════════════════════════════════════

Изменение версии: None → 1.0.0 (Первоначальная ратификация)

Принципы:
  [ДОБАВЛЕНО] I. Дизайн-Ориентированный Подход
  [ДОБАВЛЕНО] II. Производительность и Доступность
  [ДОБАВЛЕНО] III. Современные Технологии
  [ДОБАВЛЕНО] IV. Компонентная Архитектура
  [ДОБАВЛЕНО] V. Типобезопасность Везде

Разделы:
  [ДОБАВЛЕНО] Технологический Стек и Инфраструктура
  [ДОБАВЛЕНО] Рабочий Процесс и Контрольные Точки Качества

Шаблоны (синхронизация):
  ✅ .specify/templates/plan-template.md — проверена согласованность
  ✅ .specify/templates/spec-template.md — проверена согласованность
  ✅ .specify/templates/tasks-template.md — проверена согласованность

Последующие TODO:
  - Нет отложенных элементов

Обоснование версионирования:
  - MAJOR.0.0: Первоначальная ратификация конституции проекта
  - Установлены базовые принципы управления для веб-приложения Uralliance
  - Определены обязательные требования к стеку технологий и качеству
═══════════════════════════════════════════════════════════════════════════
-->

# Конституция Uralliance

## Основные Принципы

### I. Дизайн-Ориентированный Подход

**НЕ ПОДЛЕЖИТ ОБСУЖДЕНИЮ**

Каждая функция ДОЛЖНА следовать концепции "Neubrutalism meets Glassmorphism" — микс брутальной геометрии с футуристичными прозрачными элементами. Дизайн имеет приоритет перед реализацией.

**Обязательные требования:**

- Каждый компонент ДОЛЖЕН включать анимации (Framer Motion или GSAP)
- Интерактивные элементы ДОЛЖНЫ иметь hover-эффекты и transitions
- Визуальная иерархия ДОЛЖНА быть очевидной: Legal (золото #D4AF37) vs Tech (cyan #06B6D4)
- 3D-элементы и параллакс ДОЛЖНЫ использоваться для акцентных секций

**Обоснование:**

Uralliance позиционируется как premium-сервис, объединяющий юридические услуги и IT-решения. Визуальное превосходство напрямую влияет на восприятие экспертизы и доверие клиентов. Дизайн — это не декорация, а конкурентное преимущество.

### II. Производительность и Доступность

**НЕ ПОДЛЕЖИТ ОБСУЖДЕНИЮ**

Все публичные страницы ДОЛЖНЫ достигать минимум 90 баллов в Lighthouse по всем категориям и соответствовать WCAG 2.1 уровня AA.

**Обязательные метрики:**

- **Lighthouse Performance**: ≥90
- **Lighthouse Accessibility**: ≥90
- **Lighthouse Best Practices**: ≥90
- **Lighthouse SEO**: ≥90
- **First Contentful Paint (FCP)**: <1.8s
- **Largest Contentful Paint (LCP)**: <2.5s
- **Total Blocking Time (TBT)**: <300ms
- **Cumulative Layout Shift (CLS)**: <0.1

**Обязательная доступность:**

- WCAG 2.1 Level AA соответствие
- Keyboard navigation для всех интерактивных элементов
- Screen reader compatibility (ARIA labels, semantic HTML)
- Color contrast ratio ≥4.5:1 для текста
- `useReducedMotion()` для управления анимациями (уважение к prefers-reduced-motion)

**Обоснование:**

Производительность и доступность напрямую влияют на SEO-ранжирование, конверсию и юридическое соответствие (ADA compliance для международных клиентов). Медленный или недоступный сайт — потеря клиентов.

### III. Современные Технологии

**НЕ ПОДЛЕЖИТ ОБСУЖДЕНИЮ**

Проект ДОЛЖЕН использовать актуальные версии фреймворков и следовать best practices 2025 года.

**Обязательный технологический стек (frontend):**

- **Next.js 14+** с App Router (не Pages Router)
- **React 18+** с Server Components
- **TypeScript 5+** с strict mode
- **Tailwind CSS 3+** с CSS Variables для дизайн-системы
- **Framer Motion** для декларативных анимаций
- **GSAP** для сложных timeline-анимаций и scroll triggers
- **Three.js / React Three Fiber** для 3D-визуализаций
- **Lottie** для микро-анимаций

**Backend (если требуется):**

- **FastAPI** (Python 3.11+)
- **Pydantic** для валидации
- **SQLModel** для ORM
- **Redis** для кеширования
- **PostgreSQL / Supabase** для БД

**Обоснование:**

Использование устаревших технологий увеличивает технический долг и усложняет найм разработчиков. Современный стек обеспечивает лучший developer experience, производительность и security patches.

### IV. Компонентная Архитектура

**НЕ ПОДЛЕЖИТ ОБСУЖДЕНИЮ**

Все UI-элементы ДОЛЖНЫ быть реализованы как переиспользуемые компоненты с четкой иерархией и документацией.

**Обязательные требования:**

- Каждый компонент ДОЛЖЕН быть самодостаточным (props + types)
- Базовые компоненты (Button, Card, Container, Input) ДОЛЖНЫ быть созданы ДО реализации страниц
- Дизайн-система ДОЛЖНА быть документирована в `designsystem.md` (цвета, типографика, spacing, breakpoints)
- Компоненты ДОЛЖНЫ поддерживать dark/light mode toggle (если применимо)
- Анимации ДОЛЖНЫ быть параметризованы через props

**Структура компонентов:**

```
src/
├── components/
│   ├── primitives/      # Button, Card, Container, Input
│   ├── layout/          # Header, Footer, Sidebar
│   ├── sections/        # Hero, Services, Process, Team, Contact
│   └── animations/      # MagneticButton, ParallaxSection, 3DScene
├── app/                 # Next.js App Router pages
├── styles/              # Global CSS, Tailwind config, CSS Variables
└── lib/                 # Utilities, hooks, helpers
```

**Обоснование:**

Компонентная архитектура обеспечивает консистентность UI, ускоряет разработку и упрощает поддержку. Каждый компонент может быть протестирован изолированно.

### V. Типобезопасность Везде

**НЕ ПОДЛЕЖИТ ОБСУЖДЕНИЮ**

TypeScript ДОЛЖЕН использоваться со strict mode, и код НЕ ДОЛЖЕН содержать `any` без явного обоснования.

**Обязательные требования:**

- `tsconfig.json` ДОЛЖЕН иметь `"strict": true`
- Все API responses ДОЛЖНЫ иметь типизацию (Zod schemas или TypeScript interfaces)
- Формы ДОЛЖНЫ использовать `react-hook-form` + `zod` для валидации
- Props компонентов ДОЛЖНЫ иметь явные TypeScript интерфейсы
- Использование `any`, `as any`, `@ts-ignore` ДОЛЖНО быть обосновано в комментариях

**Примеры обязательной типизации:**

```typescript
// ✅ Правильно
interface ButtonProps {
  variant: "primary" | "secondary";
  size?: "sm" | "md" | "lg";
  onClick: () => void;
  children: React.ReactNode;
}

const Button: React.FC<ButtonProps> = ({ variant, size = "md", onClick, children }) => {
  // ...
};

// ❌ Неправильно
const Button = (props: any) => {
  // ...
};
```

**Обоснование:**

Типобезопасность предотвращает runtime ошибки, улучшает IDE-поддержку (autocomplete, refactoring) и служит живой документацией для API и компонентов.

## Технологический Стек и Инфраструктура

### Деплой и Хостинг

**Frontend:**

- **Primary**: Vercel (Next.js native integration, automatic deployments)
- **Alternative**: Cloudflare Pages (для CDN-оптимизации)

**Backend (если требуется):**

- **Primary**: Railway или Render (для FastAPI)
- **Database**: Supabase (managed PostgreSQL + Auth + Storage)

### Обязательные инструменты разработки

- **Линтинг**: ESLint с Next.js config
- **Форматирование**: Prettier с Tailwind plugin
- **Pre-commit hooks**: Husky + lint-staged
- **Типизация**: TypeScript strict mode
- **Тестирование** (если требуется): Jest + React Testing Library

## Рабочий Процесс и Контрольные Точки Качества

### Этапы реализации (обязательно)

**Этап 1: Фундамент (1-2 дня)**

- [ ] Инициализация Next.js 14+ проекта с TypeScript
- [ ] Настройка Tailwind CSS + CSS Variables
- [ ] Создание `designsystem.md` (цвета, типографика, spacing)
- [ ] Реализация базовых компонентов: Button, Card, Container
- [ ] Настройка Layout с Header/Footer

**Этап 2: Hero + Навигация (1 день)**

- [ ] Split-screen Hero с морфингом (Legal ↔ Tech)
- [ ] Sticky navigation с blur-эффектом
- [ ] Мобильное меню (drawer)
- [ ] 3D-элемент для Tech-секции (Three.js/R3F)

**Этап 3: Основные секции (2-3 дня)**

- [ ] Услуги (Bento Grid или 3D-сетка)
- [ ] Кейсы (галерея с hover-эффектами)
- [ ] Процесс работы (Timeline с анимацией)
- [ ] Команда (карточки с flip-эффектом)
- [ ] Форма контакта (react-hook-form + zod)

**Этап 4: Анимации + полировка (1-2 дня)**

- [ ] GSAP scroll triggers и параллакс
- [ ] Микро-анимации (Lottie)
- [ ] Performance optimization (lazy loading, image optimization)
- [ ] Lighthouse audit (достижение ≥90 по всем метрикам)
- [ ] Accessibility audit (WCAG 2.1 AA)

### Контрольные точки качества (MUST PASS)

**Перед каждым коммитом:**

- [ ] ESLint проходит без ошибок
- [ ] TypeScript компилируется без ошибок
- [ ] Prettier применен ко всем файлам

**Перед каждым PR:**

- [ ] Локальный dev build успешен (`npm run build`)
- [ ] Lighthouse Desktop ≥90 по всем метрикам
- [ ] Lighthouse Mobile ≥85 по всем метрикам (допустимо снижение на 5 баллов на мобильных)
- [ ] Нет TypeScript `any` без обоснования
- [ ] Responsive design протестирован (320px, 768px, 1024px, 1440px)

**Перед production deployment:**

- [ ] Все Lighthouse метрики ≥90
- [ ] Accessibility WCAG 2.1 AA проверка (axe DevTools)
- [ ] Cross-browser тестирование (Chrome, Firefox, Safari)
- [ ] Mobile testing (iOS Safari, Chrome Android)
- [ ] Forms валидируются корректно (react-hook-form + zod)
- [ ] SEO: meta tags, Open Graph, sitemap.xml
- [ ] Analytics настроена (Google Analytics или альтернатива)

## Управление

### Приоритет конституции

Эта конституция имеет ВЫСШИЙ приоритет над всеми другими соглашениями и практиками в проекте. Все решения по архитектуре, дизайну и реализации ДОЛЖНЫ соответствовать принципам, изложенным здесь.

### Процесс внесения поправок

Поправки в конституцию требуют:

1. **Документированного обоснования**: Почему текущий принцип недостаточен
2. **Оценки влияния**: Какие части проекта затронуты
3. **Плана миграции**: Как привести существующий код в соответствие
4. **Утверждения**: От технического лидера или владельца продукта

### Версионирование конституции

Конституция следует Semantic Versioning (MAJOR.MINOR.PATCH):

- **MAJOR**: Обратно несовместимые изменения (удаление/переопределение ключевых принципов)
- **MINOR**: Добавление новых принципов или разделов
- **PATCH**: Уточнения формулировок, исправление опечаток

### Проверка соответствия

**Все PR ДОЛЖНЫ:**

- Пройти автоматические проверки (ESLint, TypeScript, Prettier)
- Включать обоснование, если нарушают принципы конституции
- Быть проверены на соответствие Design System

**Сложность ДОЛЖНА быть обоснована:**

- Если добавляется новая библиотека: почему существующие инструменты недостаточны?
- Если нарушается принцип компонентности: почему невозможна переиспользуемость?
- Если используется `any` в TypeScript: какие технические ограничения препятствуют типизации?

### Руководство для разработчиков

Эта конституция служит основой для всех проектных решений. Для операционного руководства используйте:

- `.specify/templates/spec-template.md` — для определения требований функций
- `.specify/templates/plan-template.md` — для планирования реализации
- `.specify/templates/tasks-template.md` — для разбивки задач
- `designsystem.md` — для UI/UX руководства (создается на этапе 1)

**Версия**: 1.0.0 | **Ратифицирована**: 2025-11-06 | **Последнее Изменение**: 2025-11-06
