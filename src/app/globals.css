@import "tailwindcss";
@import "../../styles/design-tokens.css";

@theme {
  /* Legal Color Palette */
  --color-legal-400: #f5e6d3; /* Светлое золото */
  --color-legal-500: #d4af37; /* Золото (primary) */
  --color-legal-600: #a68b2c; /* Темное золото */
  --color-legal: var(--color-legal-primary);

  /* Tech Color Palette */
  --color-tech-400: #22d3ee; /* Яркий cyan */
  --color-tech-500: #06b6d4; /* Cyan (primary) */
  --color-tech-600: #0891b2; /* Темный cyan */
  --color-tech: var(--color-tech-primary);

  /* Semantic Colors - defined in design-tokens.css */

  /* Typography */
  --font-sans: var(--font-sans);
  --font-display: var(--font-display);
  --font-mono: var(--font-mono);

  /* Container */
  --container-2xl: var(--container-2xl);

  /* Radix UI Color Mappings for Tailwind v4 */
  --color-input: var(--color-border);
  --color-ring: var(--color-tech-primary);
  --color-foreground: var(--color-text-primary);
  --color-popover: var(--color-background-secondary);
  --color-popover-foreground: var(--color-text-primary);
  --color-accent: var(--color-tech-surface);
  --color-accent-foreground: var(--color-text-primary);
  --color-muted-foreground: var(--color-text-muted);
  --color-border: var(--color-border);
}

:root {
  /* Promo banner height - dynamically set by PromoBanner component */
  --promo-banner-height: 0px;
}

html {
  overflow-x: hidden;
  overflow-y: auto;
}

body {
  overflow-x: hidden;
  background: var(--color-background);
  color: var(--color-text-primary);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Intro loader states */
body.intro-complete #intro-overlay {
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Разрешаем выделение только для интерактивных элементов */
input,
textarea,
[contenteditable="true"] {
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}

@media (pointer: fine) {
  html {
    scrollbar-width: none;
  }

  body::-webkit-scrollbar {
    display: none;
  }
}

/* Custom cursor - hide default only when custom cursor is enabled via JS */
html.custom-cursor-enabled,
html.custom-cursor-enabled *,
html.custom-cursor-enabled *::before,
html.custom-cursor-enabled *::after {
  cursor: none !important;
}

/* Force hide for common interactive elements when custom cursor enabled */
html.custom-cursor-enabled a,
html.custom-cursor-enabled button,
html.custom-cursor-enabled input,
html.custom-cursor-enabled textarea,
html.custom-cursor-enabled select,
html.custom-cursor-enabled [role="button"],
html.custom-cursor-enabled [tabindex],
html.custom-cursor-enabled label,
html.custom-cursor-enabled summary {
  cursor: none !important;
}

/* Override Leaflet and other library cursors when custom cursor enabled */
html.custom-cursor-enabled .leaflet-container,
html.custom-cursor-enabled .leaflet-container *,
html.custom-cursor-enabled .leaflet-interactive,
html.custom-cursor-enabled .leaflet-grab,
html.custom-cursor-enabled .leaflet-dragging,
html.custom-cursor-enabled .leaflet-dragging .leaflet-grab,
html.custom-cursor-enabled .leaflet-clickable,
html.custom-cursor-enabled [class*="leaflet-"] {
  cursor: none !important;
}

/* Autofill styles - override browser defaults */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
textarea:-webkit-autofill:active,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus,
select:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px var(--color-background) inset !important;
  box-shadow: 0 0 0 1000px var(--color-background) inset !important;
  -webkit-text-fill-color: var(--color-text-primary) !important;
  caret-color: var(--color-text-primary) !important;
  transition: background-color 5000s ease-in-out 0s;
}

.overlay-scrollbar {
  position: fixed;
  top: 16px;
  bottom: 16px;
  right: 12px;
  width: 12px;
  border-radius: var(--radius-full);
  background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.05) 50%, transparent 100%);
  display: flex;
  justify-content: center;
  pointer-events: auto;
  z-index: 9999;
}

.overlay-scrollbar__thumb {
  width: 100%;
  border-radius: inherit;
  background: rgba(6, 182, 212, 0.25);
  box-shadow: 0 4px 12px rgba(2, 6, 23, 0.4);
  pointer-events: auto;
  transition: background var(--transition-base);
}

.overlay-scrollbar__thumb:active {
  background: rgba(6, 182, 212, 0.5);
}

@media (pointer: coarse), (hover: none) {
  .overlay-scrollbar {
    display: none;
  }
}

/* Glassmorphism utilities */
.glass {
  background: var(--color-glass);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.gradient-legal {
  background:
    var(--gradient-hero-legal),
    linear-gradient(180deg, rgba(11, 11, 12, 0.8), rgba(11, 11, 12, 0.4));
}

.gradient-tech {
  background:
    var(--gradient-hero-tech), linear-gradient(180deg, rgba(11, 11, 12, 0.8), rgba(11, 11, 12, 0.4));
}

.text-gradient {
  background: var(--gradient-hero);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.btn-underline {
  position: relative;
  isolation: isolate;
}

.btn-underline::before,
.btn-underline::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
  transition:
    opacity 0.45s ease,
    transform 0.45s ease;
}

.btn-underline::before {
  background-image: var(
    --btn-underline-solid,
    linear-gradient(to right, transparent, rgba(255, 255, 255, 0.6), transparent)
  );
}

.btn-underline::after {
  left: 25%;
  right: 25%;
  filter: blur(2px);
  background-image: var(
    --btn-underline-blur,
    linear-gradient(to right, transparent, rgba(255, 255, 255, 0.4), transparent)
  );
}

.btn-underline:hover::before,
.btn-underline:hover::after {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .btn-underline::before,
  .btn-underline::after {
    transition: none;
  }
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeInUp {
  animation: fadeInUp 0.5s ease-out forwards;
  opacity: 0;
}
