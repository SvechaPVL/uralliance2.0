---
description: Выполнить процесс планирования реализации с использованием шаблона плана для генерации артефактов проектирования.
---

## Ввод пользователя

```text
$ARGUMENTS
```

Вы **ДОЛЖНЫ** учесть ввод пользователя перед продолжением (если он не пустой).

## Структура

1. **Настройка**: Запустите `.specify/scripts/bash/setup-plan.sh --json` из корня репозитория и разберите JSON для FEATURE_SPEC, IMPL_PLAN, SPECS_DIR, BRANCH. Для одинарных кавычек в аргументах типа "I'm Groot" используйте синтаксис экранирования: например 'I'\''m Groot' (или двойные кавычки, если возможно: "I'm Groot").

2. **Загрузка контекста**: Прочитайте FEATURE_SPEC и `.specify/memory/constitution.md`. Загрузите шаблон IMPL_PLAN (уже скопирован).

3. **Выполнение процесса планирования**: Следуйте структуре в шаблоне IMPL_PLAN для:
   - Заполнения технического контекста (отметьте неизвестное как "NEEDS CLARIFICATION")
   - Заполнения раздела проверки конституции из constitution
   - Оценки контрольных точек (ERROR при необоснованных нарушениях)
   - Фаза 0: Генерация research.md (разрешение всех NEEDS CLARIFICATION)
   - Фаза 1: Генерация data-model.md, contracts/, quickstart.md
   - Фаза 1: Обновление контекста агента запуском скрипта агента
   - Повторная оценка проверки конституции после проектирования

4. **Остановка и отчет**: Команда завершается после планирования фазы 2. Сообщите ветку, путь к IMPL_PLAN и сгенерированные артефакты.

## Фазы

### Фаза 0: Обзор и исследование

1. **Извлечение неизвестных из технического контекста** выше:
   - Для каждого NEEDS CLARIFICATION → задача исследования
   - Для каждой зависимости → задача лучших практик
   - Для каждой интеграции → задача паттернов

2. **Генерация и отправка исследовательских агентов**:

   ```text
   Для каждого неизвестного в техническом контексте:
     Задача: "Исследовать {неизвестное} для {контекст функции}"
   Для каждого технологического выбора:
     Задача: "Найти лучшие практики для {технология} в {область}"
   ```

3. **Консолидация результатов** в `research.md` используя формат:
   - Решение: [что было выбрано]
   - Обоснование: [почему выбрано]
   - Рассмотренные альтернативы: [что еще оценивалось]

**Результат**: research.md со всеми разрешенными NEEDS CLARIFICATION

### Фаза 1: Проектирование и контракты

**Предварительные условия:** `research.md` завершен

1. **Извлечение сущностей из спецификации функции** → `data-model.md`:
   - Имя сущности, поля, отношения
   - Правила валидации из требований
   - Переходы состояний, если применимо

2. **Генерация API контрактов** из функциональных требований:
   - Для каждого действия пользователя → endpoint
   - Используйте стандартные паттерны REST/GraphQL
   - Выведите схему OpenAPI/GraphQL в `/contracts/`

3. **Обновление контекста агента**:
   - Запустите `.specify/scripts/bash/update-agent-context.sh claude`
   - Эти скрипты определяют, какой AI агент используется
   - Обновляют соответствующий файл контекста агента
   - Добавляют только новую технологию из текущего плана
   - Сохраняют ручные добавления между маркерами

**Результат**: data-model.md, /contracts/\*, quickstart.md, файл специфичный для агента

## Ключевые правила

- Используйте абсолютные пути
- ERROR при сбоях контрольных точек или неразрешенных уточнениях
